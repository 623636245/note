(window.webpackJsonp=window.webpackJsonp||[]).push([[201],{415:function(e,t,r){"use strict";r.r(t);var n=r(0),s=Object(n.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"liferecycle"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#liferecycle","aria-hidden":"true"}},[e._v("#")]),e._v(" LifeRecycle")]),e._v(" "),r("h3",{attrs:{id:"实现监听页面钩子"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#实现监听页面钩子","aria-hidden":"true"}},[e._v("#")]),e._v(" 实现监听页面钩子")]),e._v(" "),r("p",[e._v("参考：https://www.jianshu.com/p/3edfa7d694e7")]),e._v(" "),r("ol",[r("li",[r("p",[e._v("在"),r("strong",[e._v("MaterialApp")]),e._v("中定义一个"),r("strong",[e._v("RouteObserver")]),e._v("对象")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("\nfinal RouteObserver<Route<dynamic>> routeObserver = RouteObserver();\n\nclass MyApp extends StatelessWidget {\n    ... \\\\此处省略一些代码\n\n    Widget _buildMaterialApp() => MaterialApp(\n      initialRoute: '/',\n      navigatorObservers: [routeObserver], //添加路由观察者\n      onGenerateRoute: _onGenerateRoute);\n}\n")])])])]),e._v(" "),r("li",[r("p",[e._v("在B页面中混淆"),r("strong",[e._v("RouteAware")]),e._v(", 并注册"),r("strong",[e._v("RouteObserver")])]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("class B extends StatefulWidget {\n     B({Key key}) : super(key: key);\n")])])])])]),e._v(" "),r("p",[e._v("}")]),e._v(" "),r("p",[e._v("class BState extends State"),r("B",[e._v("  with RouteAware {")])],1),e._v(" "),r("pre",[r("code",[e._v(' @override\n void didChangeDependencies() {\n   routeObserver.subscribe(this, ModalRoute.of(context)); //订阅\n   super.didChangeDependencies();\n }\n\n @override\n void didPush() {\n   debugPrint("------\x3e didPush");\n   super.didPush();\n }\n\n @override\n void didPop() {\n   debugPrint("------\x3e didPop");\n   super.didPop();\n }\n\n @override\n void didPopNext() {\n   debugPrint("------\x3e didPopNext");\n   super.didPopNext();\n }\n')])]),e._v(" "),r("p",[e._v('@override\nvoid didPushNext() {\ndebugPrint("------\x3e didPushNext");\nsuper.didPushNext();\n}')]),e._v(" "),r("pre",[r("code",[e._v(" @override\n void dispose() {\n   routeObserver.unsubscribe(this); //取消订阅\n   super.dispose();\n }\n")])]),e._v(" "),r("p",[e._v("}")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("\n")])])])])}),[],!1,null,null,null);t.default=s.exports}}]);